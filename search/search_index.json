{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#what-is-ftpgrab","title":"What is FTPGrab?","text":"<p>FTPGrab  is a CLI application written in Go and delivered as a single executable (and a Docker image) to grab your files from a remote FTP or SFTP server to your NAS, server or computer.</p> <p>With Go, this can be done with an independent binary distribution across all platforms and architectures that Go supports. This support includes Linux, macOS, and Windows, on architectures like amd64, 386, ARM, PowerPC, and others.</p> <p>Because FTPGrab is distributed as an independent binary, it is ideal for those with a seedbox to grab your files periodically to your Synology, Qnap, D-Link and others NAS.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Multiple sources</li> <li>SFTP support</li> <li>Prevent re-download through a hash</li> <li>Efficient key/value store database to audit files already downloaded</li> <li>Internal cron implementation through go routines</li> <li>Include and exclude filters with regular expression</li> <li>Date filter</li> <li>Retry on failed download</li> <li>Change file/folder permissions and owner</li> <li>Translate modtimes on downloaded files</li> <li>Get notified through Mail, Slack, Webhook and more</li> <li>Enhanced logging</li> <li>Official Docker image available</li> </ul>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the terms of the MIT license.</p>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#7110-20251224","title":"7.11.0 (2025/12/24)","text":"<ul> <li>Go 1.25 (#443)</li> <li>Alpine Linux 3.23 (#444)</li> <li>MkDocs Materials 9.6.20 (#428)</li> <li>Bump github.com/alecthomas/kong from 1.6.0 to 1.13.0 (#438)</li> <li>Bump github.com/go-playground/validator/v10 from 10.23.0 to 10.30.0 (#440)</li> <li>Bump github.com/pkg/sftp from 1.13.7 to 1.13.10 (#437)</li> <li>Bump github.com/rs/zerolog from 1.33.0 to 1.34.0 (#422)</li> <li>Bump github.com/stretchr/testify from 1.10.0 to 1.11.1 (#439)</li> <li>Bump golang.org/x/crypto from 0.31.0 to 0.46.0 (#432)</li> <li>Bump go.etcd.io/bbolt from 1.3.11 to 1.4.3 (#434)</li> </ul>"},{"location":"changelog/#7100-20241220","title":"7.10.0 (2024/12/20)","text":"<ul> <li>Go 1.23 (#397)</li> <li>Alpine Linux 3.21 (#397)</li> <li>Bump github.com/alecthomas/kong from 0.8.0 to 1.6.0 (#323 #354 #393)</li> <li>Bump github.com/go-playground/validator/v10 from 10.16.0 to 10.23.0 (#350 #370 #394)</li> <li>Bump github.com/pkg/sftp from 1.13.5 to 1.13.7 (#326 #395)</li> <li>Bump github.com/rs/zerolog from 1.31.0 to 1.33.0 (#344 #366)</li> <li>Bump github.com/stretchr/testify from 1.8.4 to 1.10.0 (#351 #396)</li> <li>Bump go.etcd.io/bbolt from 1.3.7 to 1.3.11 (#325 #348 #365 #377)</li> <li>Bump golang.org/x/crypto from 0.14.0 to 0.31.0 (#324 #337 #352 #391)</li> <li>Bump golang.org/x/net from 0.21.0 to 0.28.0 (#360 #353 #392)</li> </ul>"},{"location":"changelog/#790-20231216","title":"7.9.0 (2023/12/16)","text":"<ul> <li>Go 1.21 (#322)</li> <li>Alpine Linux 3.18 (#322)</li> <li>Bump github.com/alecthomas/kong from 0.7.1 to 0.8.0 (#306</li> <li>Bump github.com/crazy-max/gonfig from 0.6.0 to 0.7.0 (#291</li> <li>Bump github.com/jlaffaye/ftp to 0.2.0 (#297 #301)</li> <li>Bump github.com/go-playground/validator/v10 from 10.11.1 to 10.16.0 (#295 #321)</li> <li>Bump github.com/rs/zerolog from 1.28.0 to 1.31.0 (#294 #320)</li> <li>Bump github.com/stretchr/testify from 1.8.1 to 1.8.4 (#283 #302)</li> <li>Bump golang.org/x/crypto from 0.4.0 to 0.8.0 (#293 #310)</li> <li>Bump golang.org/x/net from 0.9.0 to 0.17.0 (#318)</li> <li>Bump golang.org/x/sys from 0.3.0 to 0.15.0 (#287 #292 #319)</li> <li>Bump go.etcd.io/bbolt from 1.3.6 to 1.3.7 (#277)</li> </ul>"},{"location":"changelog/#780-20221231","title":"7.8.0 (2022/12/31)","text":"<ul> <li>Option to escape all regular expression metacharacters (#270)</li> <li>Fix file mode type (#269)</li> <li>Move from <code>io/ioutil</code> to <code>io</code> and <code>os</code> packages (#219)</li> <li>Move <code>syscall</code> to <code>golang.org/x/sys</code> (#220)</li> <li>Go 1.19 (#262 #253)</li> <li>Alpine Linux 3.17 (#268 #254 #223)</li> <li>MkDocs Material 8.3.9 (#256)</li> <li>Enhance workflow (#263 #218 #255)</li> <li>Bump github.com/crazy-max/gonfig from 0.5.0 to 0.6.0 (#257)</li> <li>Bump github.com/pkg/sftp from 1.13.2 to 1.13.5 (#208 #210 #246)</li> <li>Bump github.com/rs/zerolog from 1.24.0 to 1.28.0 (#209 #211 #217 #245 #258)</li> <li>Bump github.com/alecthomas/kong from 0.2.17 to 0.7.1 (#212 #215 #222 #230 #248 #266)</li> <li>Bump github.com/go-playground/validator/v10 from 10.9.0 to 10.11.1 (#221 #229 #236 #261)</li> <li>Bump github.com/stretchr/testify from 1.7.0 to 1.8.1 (#251 #264)</li> <li>Bump github.com/docker/go-units from 0.4.0 to 0.5.0 (#259)</li> <li>Bump golang.org/x/crypto to 0.4.0 (#272)</li> <li>Bump golang.org/x/sys to 0.3.0 (#271)</li> </ul>"},{"location":"changelog/#770-20210905","title":"7.7.0 (2021/09/05)","text":"<ul> <li>Go 1.17 (#203)</li> <li>Wrong remaining time displayed (#204)</li> <li>Add <code>windows/arm64</code> artifact (#205)</li> <li>MkDocs Material 7.2.6</li> <li>Bump github.com/rs/zerolog from 1.23.0 to 1.24.0 (#207)</li> <li>Bump github.com/crazy-max/gonfig from 0.4.0 to 0.5.0 (#206)</li> <li>Bump github.com/gorilla/websocket to v1.4.2</li> <li>Bump github.com/go-playground/validator/v10 from 10.7.0 to 10.9.0 (#200 #202)</li> </ul>"},{"location":"changelog/#760-20210725","title":"7.6.0 (2021/07/25)","text":"<ul> <li>Add <code>linux/riscv64</code> artifact</li> <li>Alpine Linux 3.14</li> <li>MkDocs Materials 7.2.0</li> <li>Bump codecov/codecov-action from 1 to 2</li> <li>GitHub Action cache backend (#198)</li> <li>Enhance issue template</li> <li>Bump github.com/pkg/sftp from 1.13.0 to 1.13.2 (#193 #196)</li> <li>Bump github.com/go-playground/validator/v10 from 10.5.0 to 10.7.0 (#187 #195)</li> <li>Bump go.etcd.io/bbolt from 1.3.5 to 1.3.6 (#190)</li> <li>Bump github.com/rs/zerolog from 1.21.0 to 1.23.0 (#188 #194)</li> <li>Bump github.com/alecthomas/kong from 0.2.16 to 0.2.17 (#191)</li> </ul>"},{"location":"changelog/#750-20210426","title":"7.5.0 (2021/04/26)","text":"<ul> <li>Add <code>disableMLSD</code> ftp option (#176)</li> <li>Fix Dockerfile</li> </ul>"},{"location":"changelog/#740-20210425","title":"7.4.0 (2021/04/25)","text":"<ul> <li>Add <code>darwin/arm64</code> artifact (#175)</li> <li>Bump github.com/go-playground/validator/v10 from 10.4.1 to 10.5.0 (#171)</li> <li>Use logger <code>PartsExclude</code> (#174)</li> <li>MkDocs Materials 7.1.3</li> <li>Bump github.com/rs/zerolog from 1.20.0 to 1.21.0 (#166)</li> <li>Go 1.16 (#167)</li> <li>Deploy docs on workflow dispatch or tag</li> <li>Bump github.com/alecthomas/kong from 0.2.15 to 0.2.16 (#165)</li> <li>Bump github.com/pkg/sftp from 1.12.0 to 1.13.0 (#164)</li> <li>Switch to goreleaser-xx (#163)</li> </ul>"},{"location":"changelog/#730-20210219","title":"7.3.0 (2021/02/19)","text":"<ul> <li>Refactor CI and dev workflow with buildx bake (#161)<ul> <li>Add <code>image-local</code> target</li> <li>Single job for artifacts and image</li> <li>Add <code>armv5</code>, <code>ppc64le</code> and <code>s390x</code> artifacts</li> <li>Upload artifacts</li> <li>Validate</li> </ul> </li> <li>Remove <code>linux/s390x</code> Docker platform support for now</li> <li>Bump github.com/stretchr/testify from 1.6.1 to 1.7.0 (#154)   Bump github.com/alecthomas/kong from 0.2.12 to 0.2.15 (#160)</li> <li>MkDocs Materials 6.2.8</li> </ul>"},{"location":"changelog/#720-20201129","title":"7.2.0 (2020/11/29)","text":"<ul> <li>Allow downloading files to a temp dir first (#149)</li> <li>Allow disabling log timestamp (#148)</li> <li>Add script notification (#147)</li> <li>Bump github.com/crazy-max/gonfig from 0.3.0 to 0.4.0 (#140)</li> </ul>"},{"location":"changelog/#711-20201102","title":"7.1.1 (2020/11/02)","text":"<ul> <li>Use embedded tzdata package</li> <li>Remove <code>--timezone</code> flag</li> <li>Docker image also available on GitHub Container Registry</li> <li>Use Docker meta action to handle tags and labels</li> </ul>"},{"location":"changelog/#710-20201004","title":"7.1.0 (2020/10/04)","text":"<ul> <li>Allow disabling <code>OPTS UTF8 ON</code> command</li> <li>Refactor to start working on #48</li> <li>Switch to Docker actions</li> <li>Go 1.15</li> <li>Update <code>GOPROXY</code> setting</li> <li>Update deps</li> </ul>"},{"location":"changelog/#701-20200804","title":"7.0.1 (2020/08/04)","text":"<ul> <li>Fix SFTP not taken into account</li> </ul>"},{"location":"changelog/#700-20200718","title":"7.0.0 (2020/07/18)","text":"<p> See Migration notes in the documentation for breaking changes.</p> <ul> <li>Repository moved to crazy-max/ftpgrab</li> <li>DockerHub repository moved to crazymax/ftpgrab</li> <li>Configuration transposed into environment variables (#90)</li> <li><code>FTPGRAB_DB</code> env var renamed <code>FTPGRAB_DB_PATH</code></li> <li><code>key</code> field for SFTP authentication has been renamed <code>keyFile</code></li> <li>Add <code>keyPassphrase</code> to provide a passphrase linked to <code>keyFile</code></li> <li>Improve configuration validation</li> <li>All fields in configuration now camelCased</li> <li>Add tests and coverage</li> <li>Seek configuration file from default places</li> <li>Configuration file not required anymore</li> <li>Switch to gonfig</li> <li>Add fields to load sensitive values from file</li> <li>Update deps</li> </ul>"},{"location":"changelog/#650-20200707","title":"6.5.0 (2020/07/07)","text":"<ul> <li>Docs website with mkdocs</li> <li>Move documentation to main repository</li> <li>Update deps</li> </ul>"},{"location":"changelog/#640-20200517","title":"6.4.0 (2020/05/17)","text":"<ul> <li>Use kong command-line parser</li> <li>Switch to Open Container Specification labels as label-schema.org ones are deprecated</li> <li>Update deps</li> </ul>"},{"location":"changelog/#630-20200119","title":"6.3.0 (2020/01/19)","text":"<ul> <li>Only accept duration as timeout value for FTP, SFTP and Webhook notif config (#69)</li> <li>Update pkg/sftp module</li> </ul>"},{"location":"changelog/#620-20191219","title":"6.2.0 (2019/12/19)","text":"<ul> <li>Add Slack notifier</li> <li>Update deps</li> <li>Go 1.13.5</li> <li>Seconds field optional for schedule</li> </ul>"},{"location":"changelog/#610-20191013","title":"6.1.0 (2019/10/13)","text":"<ul> <li>Multi-platform Docker image</li> <li>Move ftpgrab/docker repo here</li> <li>Go 1.12.10</li> <li>Use GOPROXY</li> <li>Stop publishing Docker image on Quay</li> <li>Switch to GitHub Actions</li> <li>Add instructions to create a Linux service</li> <li>Remove <code>--docker</code> flag</li> <li>Allow overriding database path through <code>FTPGRAB_DB</code> env var</li> <li>Allow overriding download output path through <code>FTPGRAB_DOWNLOAD_OUTPUT</code> env var</li> </ul>"},{"location":"changelog/#602-20190727","title":"6.0.2 (2019/07/27)","text":"<ul> <li>Use <code>io.Copy</code> to avoid crash due to insufficient memory</li> </ul>"},{"location":"changelog/#601-20190724","title":"6.0.1 (2019/07/24)","text":"<ul> <li>Fix cron stopped after first trigger</li> </ul>"},{"location":"changelog/#600-20190721","title":"6.0.0 (2019/07/21)","text":"<p> See Migration notes in the documentation for breaking changes.</p> <ul> <li>Log skip status</li> <li>Set ServerName field if implicit TLS</li> <li>Switch to jlaffaye/ftp module<ul> <li>Fix race condition</li> <li>Performance improvement</li> </ul> </li> </ul>"},{"location":"changelog/#550-20190720","title":"5.5.0 (2019/07/20)","text":"<ul> <li>Switch to crazy-max/goftp (#55)</li> </ul>"},{"location":"changelog/#541-20190718","title":"5.4.1 (2019/07/18)","text":"<ul> <li>Fix durafmt runtime error</li> </ul>"},{"location":"changelog/#540-20190718","title":"5.4.0 (2019/07/18)","text":"<ul> <li>Improve logging</li> <li>Display next execution time</li> <li>Use v3 robfig/cron</li> <li>Always run on startup</li> <li>Go 1.12.4</li> </ul>"},{"location":"changelog/#530-20190504","title":"5.3.0 (2019/05/04)","text":"<ul> <li>Escape all regexp metacharacters on read dir (#49)</li> <li>Remove unused field</li> <li>Go 1.12</li> <li>Update deps</li> </ul>"},{"location":"changelog/#520-20190329","title":"5.2.0 (2019/03/29)","text":"<p> See Migration notes in the documentation for breaking changes.</p> <ul> <li>Add webhook notification method</li> <li>Remove unnecessary <code>connections_per_host</code> field (#48)</li> <li>Fix log folder creation</li> </ul>"},{"location":"changelog/#511-20190218","title":"5.1.1 (2019/02/18)","text":"<ul> <li>Blackfriday module fixed through hermes v2.0.2 (matcornic/hermes#51)</li> </ul>"},{"location":"changelog/#510-20190214","title":"5.1.0 (2019/02/14)","text":"<p> See Migration notes in the documentation for breaking changes.</p> <ul> <li>Add SFTP support (#42)</li> </ul>"},{"location":"changelog/#501-20190213","title":"5.0.1 (2019/02/13)","text":"<ul> <li>Fix high CPU load on schedule</li> <li>Add support for FreeBSD</li> </ul>"},{"location":"changelog/#500-20190212","title":"5.0.0 (2019/02/12)","text":"<p> See Migration notes in the documentation for breaking changes.</p> <ul> <li>BIG rewrite (#36)</li> <li>Multiplatform : Linux, macOS and Windows on architectures like amd64, 386, ARM and others</li> <li>Modern CLI interactions</li> <li>Yaml Configuration file</li> <li>Detect and merge configuration</li> <li>Handle defaults</li> <li>Add Goreleaser</li> <li>Bolt db to audit files already downloaded</li> <li>Native FTP client</li> <li>Logging with zerolog</li> <li>Send reports through email</li> <li>Generate responsive and beautiful email reports through hermes</li> <li>Lightweight Docker image (~6MB)</li> <li>Docker image moved to a dedicated organization on Docker Hub and Quay.</li> <li>Embedded cron using go routines</li> <li>Manage base dir</li> <li>Set original modtime</li> <li>Include/exclude based on regexp</li> <li>Ignore files by date (#39)</li> <li>Handle mutex</li> </ul>"},{"location":"changelog/#435-20190204","title":"4.3.5 (2019/02/04)","text":"<ul> <li>Switch to Travis CI (com)</li> </ul>"},{"location":"changelog/#434-20180815","title":"4.3.4 (2018/08/15)","text":"<ul> <li>Empty folder leeds to spinlock (#33)</li> </ul>"},{"location":"changelog/#433-20180514","title":"4.3.3 (2018/05/14)","text":"<ul> <li>nawk and gawk not required anymore (#38)</li> </ul>"},{"location":"changelog/#432-20180420","title":"4.3.2 (2018/04/20)","text":"<ul> <li>Detect if file size is currently changing and hold for download (#37)</li> </ul>"},{"location":"changelog/#431-20180115","title":"4.3.1 (2018/01/15)","text":"<ul> <li>Fix issue while checking source hash (#35)</li> </ul>"},{"location":"changelog/#430-20171226","title":"4.3.0 (2017/12/26)","text":"<ul> <li>Add an exclude filter for files through <code>DL_EXCLUDE_REGEX</code> (#27)</li> </ul>"},{"location":"changelog/#424-20171101","title":"4.2.4 (2017/11/01)","text":"<ul> <li>Do not exit if connection failed</li> </ul>"},{"location":"changelog/#423-20171030","title":"4.2.3 (2017/10/30)","text":"<ul> <li>Fix files download again (#32)</li> </ul>"},{"location":"changelog/#422-20171029","title":"4.2.2 (2017/10/29)","text":"<ul> <li>Rebuild PATH</li> </ul>"},{"location":"changelog/#421-20171016","title":"4.2.1 (2017/10/16)","text":"<ul> <li>Add ssmtp on Docker image to send emails</li> <li>Use sendmail instead of mail command</li> </ul>"},{"location":"changelog/#420-20171015","title":"4.2.0 (2017/10/15)","text":"<p> See Migration notes in the documentation for breaking changes.</p> <ul> <li>Add Docker image (more info on docker repository)</li> <li>Remove init script</li> <li>Fix issue while resuming downloads</li> <li>Move script to <code>/usr/bin</code></li> <li>Coding style</li> </ul>"},{"location":"changelog/#411-20170426","title":"4.1.1 (2017/04/26)","text":"<ul> <li>Add tests (#30)</li> <li>Use type instead of which (#29)</li> <li>Fix error prone and performance issues</li> <li>Coding style</li> <li>Add default config</li> <li>Add Codacy</li> </ul>"},{"location":"changelog/#41-20170315","title":"4.1 (2017/03/15)","text":"<p> See Migration notes in the documentation for breaking changes.</p> <ul> <li>Rename the project ftpgrab ! (#28)</li> </ul>"},{"location":"changelog/#40-20170314","title":"4.0 (2017/03/14)","text":"<p> See Migration notes in the documentation for breaking changes.</p> <ul> <li>Shuffle file/folder listing (#25)</li> <li>Allow multiple instances (#22)</li> </ul>"},{"location":"changelog/#32-20160620","title":"3.2 (2016/06/20)","text":"<ul> <li>Add messages for permission issue (#19)</li> <li>Move some instructions to Wiki (#18)</li> <li>Update <code>ISSUE_TEMPLATE.md</code></li> <li>Add .editorconfig</li> <li>MIT License</li> </ul>"},{"location":"changelog/#31-20160327","title":"3.1 (2016/03/27)","text":"<p>You have to edit the config file <code>ftp-sync.conf</code> if you upgrade from a previous release!</p> <ul> <li>Add multiple ftp sources paths (#18)</li> <li>Sed not escaping &amp; char (#17)</li> <li>Add <code>DL_CREATE_BASEDIR</code> option to create basename of a ftp source path in the destination folder.</li> </ul>"},{"location":"changelog/#30-20160320","title":"3.0 (2016/03/20)","text":"<p>You have to edit the config file <code>ftp-sync.conf</code> if you upgrade from a previous release!</p> <ul> <li>MD5 file not created with text mode (#16)</li> <li>Implement FTPS support for Curl (#15)</li> <li>Implement resume downloads support (#14)</li> <li>Add DEBUG option</li> <li>Full Curl implementation when selected for file size and list files</li> <li>Bug with ftpsyncGetHumanSize function</li> <li>Display download regex</li> <li>Add sha1 hash type</li> <li>Bug with special chars for curl method</li> <li>Bug with bash condition</li> <li>Add <code>Found a bug?</code> section in README.md</li> <li>Add <code>ISSUE_TEMPLATE.md</code></li> </ul>"},{"location":"changelog/#203-20150322","title":"2.03 (2015/03/22)","text":"<ul> <li>Change location of MD5 file</li> </ul>"},{"location":"changelog/#202-20150321","title":"2.02 (2015/03/21)","text":"<ul> <li>Bug checking MD5 (#11)</li> </ul>"},{"location":"changelog/#201-20150320","title":"2.01 (2015/03/20)","text":"<ul> <li>Bug download with sqlite3 (#10)</li> </ul>"},{"location":"changelog/#200-20150319","title":"2.00 (2015/03/19)","text":"<ul> <li>Add SQLite method to store MD5 hash (#8)</li> </ul>"},{"location":"changelog/#195-20140809","title":"1.95 (2014/08/09)","text":"<ul> <li>Bug trailing slash  (#6)</li> </ul>"},{"location":"changelog/#194-20140522","title":"1.94 (2014/05/22)","text":"<ul> <li>Bug replacing destination folder</li> </ul>"},{"location":"changelog/#193-20140216","title":"1.93 (2014/02/16)","text":"<ul> <li>Update README.md and .gitignore</li> <li>New year!</li> <li>Adding hide progress option</li> </ul>"},{"location":"changelog/#192-20131201","title":"1.92 (2013/12/01)","text":"<ul> <li>Bug with the config file</li> </ul>"},{"location":"changelog/#191-20131201","title":"1.91 (2013/12/01)","text":"<ul> <li>Adding curl download method</li> </ul>"},{"location":"changelog/#19-20131030","title":"1.9 (2013/10/30)","text":"<ul> <li>Remove progress filter on wget</li> </ul>"},{"location":"changelog/#18-20131012","title":"1.8 (2013/10/12)","text":"<ul> <li>Update README.md</li> <li>Bug with empty folders</li> </ul>"},{"location":"changelog/#17-20131006","title":"1.7 (2013/10/06)","text":"<ul> <li>Adding external config file</li> <li>Add gawk as required package</li> <li>Update README.md with awk problem</li> <li>Change perms recursively when downloads are finished</li> </ul>"},{"location":"changelog/#16-20130710","title":"1.6 (2013/07/10)","text":"<ul> <li>Misspelling</li> <li>Decoding wget problem</li> <li>Alternative to kill old and sub process</li> </ul>"},{"location":"changelog/#15-20130610","title":"1.5 (2013/06/10)","text":"<ul> <li>Update README.md</li> <li>Add synology example</li> </ul>"},{"location":"changelog/#14-20130605","title":"1.4 (2013/06/05)","text":"<ul> <li>Check process already running</li> </ul>"},{"location":"changelog/#13-20130602","title":"1.3 (2013/06/02)","text":"<ul> <li>Use wget instead of curlftpfs</li> </ul>"},{"location":"changelog/#12-20130601","title":"1.2 (2013/06/01)","text":"<ul> <li>Adding email var to receive logs</li> </ul>"},{"location":"changelog/#11-20130531","title":"1.1 (2013/05/31)","text":"<ul> <li>Remove dualEcho</li> <li>Improvement of the error log with exec and tail</li> <li>Change MD5 filter</li> <li>Filter bug and add grep search for hash</li> </ul>"},{"location":"changelog/#10-20130524","title":"1.0 (2013/05/24)","text":"<ul> <li>Update README.md</li> <li>Initial version</li> </ul>"},{"location":"contributing/","title":"Contributing","text":"<p>Hi there! I'm thrilled that you'd like to contribute to this project. Your help is essential for keeping it great.</p> <p>Contributions to this project are released to the public under the project's open source license.</p>"},{"location":"contributing/#submitting-a-pull-request","title":"Submitting a pull request","text":"<ol> <li>Fork and clone the repository</li> <li>Configure and install the dependencies: <code>go mod download</code></li> <li>Create a new branch: <code>git checkout -b my-branch-name</code></li> <li>Make your changes</li> <li>Validate: <code>docker buildx bake validate</code></li> <li>Test your code: <code>docker buildx bake test</code></li> <li>Build the project: <code>docker buildx bake artifact-all image-all</code></li> <li>Push to your fork and submit a pull request</li> <li>Pat your self on the back and wait for your pull request to be reviewed and merged.</li> </ol> <p>Here are a few things you can do that will increase the likelihood of your pull request being accepted:</p> <ul> <li>Make sure the <code>README.md</code> and any other relevant documentation are kept up-to-date.</li> <li>I try to follow SemVer v2.0.0. Randomly breaking public APIs is not an option.</li> <li>Keep your change as focused as possible. If there are multiple changes you would like to make that are not dependent upon each other, consider submitting them as separate pull requests.</li> <li>Write a good commit message.</li> </ul>"},{"location":"contributing/#resources","title":"Resources","text":"<ul> <li>How to Contribute to Open Source</li> <li>Using Pull Requests</li> <li>GitHub Help</li> </ul>"},{"location":"donate/","title":"Donate","text":"<p>FTPGrab  is free and open source and always will be.</p> <p>All kinds of contributions are welcome! The most basic way to show your support is to star the project, or to raise issues.</p> <p>You can also support this project by becoming a sponsor on GitHub or by making a Paypal donation to ensure this journey continues indefinitely!</p>"},{"location":"faq/","title":"FAQ","text":""},{"location":"faq/#timezone","title":"Timezone","text":"<p>By default, all interpretation and scheduling is done with your local timezone (<code>TZ</code> environment variable).</p> <p>Cron schedule may also override the timezone to be interpreted in by providing an additional space-separated field at the beginning of the cron spec, of the form <code>CRON_TZ=&lt;timezone&gt;</code>:</p> <pre><code>ftpgrab --schedule \"CRON_TZ=Asia/Tokyo */30 * * * *\"\n</code></pre>"},{"location":"faq/#what-kind-of-cron-expression-can-i-use-for-scheduling","title":"What kind of CRON expression can I use for scheduling?","text":"<p>A CRON expression represents a set of times, using 6 space-separated fields.</p> <ul> <li><code>*/30 * * * *</code> will launch a job every 30 minutes.</li> <li><code>*/15 * * * * *</code> will launch a job every 15 seconds.</li> </ul> <p>More examples can be found on the official library documentation.</p>"},{"location":"faq/#how-to-grab-from-multiple-sources","title":"How to grab from multiple sources?","text":"<p>You can add multiple sources in the <code>sources</code> field of the configuration file:</p> <pre><code>ftp|sftp:\n  ...\n  sources:\n    - /path1\n    - /path2/folder\n</code></pre>"},{"location":"faq/#what-regexp-semantic-is-used-to-filter-inclusionsexclusions","title":"What Regexp semantic is used to filter inclusions/exclusions?","text":"<p>FTPGrab uses Compile to parse regular expressions. This means the regexp returns a match that begins as early as possible in the input (leftmost) like Perl, Python, and other implementations use. You can test your regular expression on regex101.com and select Golang flavor. Check this quick example.</p>"},{"location":"faq/#how-can-i-editremove-some-entries-in-the-database","title":"How can I edit/remove some entries in the database?","text":"<p>FTPGrab currently uses the embedded key/value database bbolt.</p> <p>You can use boltBrowser which is a GUI web-based explorer and editor or this CLI browser to remove some entries.</p>"},{"location":"reporting-issue/","title":"Reporting an issue","text":""},{"location":"reporting-issue/#before-submitting-an-issue","title":"Before submitting an issue","text":"<p>First, be a good guy.</p> <p>Please do a search in open issues to see if the issue or feature request has already been filed and read the FAQ page first.</p> <p>If you find your issue already exists, make relevant comments and add your reaction. Use a reaction in place of a \"+1\" comment.</p> <p> - upvote</p> <p> - downvote</p> <p>If you cannot find an existing issue that describes your bug or feature, submit an issue using the guidelines below.</p>"},{"location":"reporting-issue/#writing-good-bug-reports-and-feature-requests","title":"Writing good bug reports and feature requests","text":"<p>File a single issue per problem and feature request.</p> <ul> <li>Do not enumerate multiple bugs or feature requests in the same issue.</li> <li>Do not add your issue as a comment to an existing issue unless it's for the identical input. Many issues look similar, but have different causes.</li> </ul> <p>The more information you can provide, the more likely someone will be successful reproducing the issue and finding a fix.</p> <p>You are now ready to create a new issue!</p>"},{"location":"reporting-issue/#closure-policy","title":"Closure policy","text":"<ul> <li>Issues that don't have the information requested above (when applicable) will be closed immediately and the poster directed to the support guidelines.</li> <li>Issues that go a week without a response from original poster are subject to closure at our discretion.</li> </ul>"},{"location":"config/","title":"Configuration","text":""},{"location":"config/#overview","title":"Overview","text":"<p>There are two different ways to define configuration in FTPGrab:</p> <ul> <li>In a configuration file</li> <li>As environment variables</li> </ul> <p>These ways are evaluated in the order listed above.</p> <p>If no value was provided for a given option, a default value applies. Moreover, if an option has sub-options, and any of these sub-options is not specified, a default value will apply as well.</p> <p>For example, the <code>FTPGRAB_DB</code> environment variable is enough by itself to enable the database, even though sub-options like <code>FTPGRAB_DB_PATH</code> exist. Once positioned, this option sets (and resets) all the default values of the sub-options of <code>FTPGRAB_DB</code>.</p>"},{"location":"config/#configuration-file","title":"Configuration file","text":"<p>At startup, FTPGrab searches for a file named <code>ftpgrab.yml</code> (or <code>ftpgrab.yaml</code>) in:</p> <ul> <li><code>/etc/ftpgrab/</code></li> <li><code>$XDG_CONFIG_HOME/</code></li> <li><code>$HOME/.config/</code></li> <li><code>.</code> (the working directory)</li> </ul> <p>You can override this using the <code>--config</code> flag or <code>CONFIG</code> env var.</p> ftpgrab.yml <pre><code>db:\n  path: ftpgrab.db\n\nserver:\n  ftp:\n    host: test.rebex.net\n    port: 21\n    username: demo\n    password: password\n    sources:\n      - /\n    timeout: 5s\n    disableUTF8: false\n    disableEPSV: false\n    tls: false\n    insecureSkipVerify: false\n    logTrace: false\n\ndownload:\n  output: /download\n  uid: 1000\n  gid: 1000\n  chmodFile: 0o644\n  chmodDir: 0o755\n  include:\n    - ^Mr\\.Robot\\.S04.+(VOSTFR|SUBFRENCH).+(720p).+(HDTV|WEB-DL|WEBRip).+\n  exclude:\n    - \\.nfo$\n  since: 2019-02-01T18:50:05Z\n  retry: 3\n  hideSkipped: false\n  tempFirst: false\n  createBaseDir: false\n\nnotif:\n  mail:\n    host: smtp.example.com\n    port: 587\n    ssl: false\n    insecureSkipVerify: false\n    from: ftpgrab@example.com\n    to: webmaster@example.com\n  webhook:\n    endpoint: http://webhook.foo.com/sd54qad89azd5a\n    method: GET\n    headers:\n      content-type: application/json\n      authorization: Token123456\n    timeout: 10s\n</code></pre>"},{"location":"config/#environment-variables","title":"Environment variables","text":"<p>All configuration from file can be transposed into environment variables. As an example, the following configuration:</p> ftpgrab.yml <pre><code>db:\n  path: ftpgrab.db\n\nserver:\n  ftp:\n    host: test.rebex.net\n    port: 21\n    username: demo\n    password: password\n    sources:\n      - /src1\n      - /src2\n    timeout: 5s\n    disableUTF8: false\n    disableEPSV: false\n    tls: false\n    insecureSkipVerify: false\n    logTrace: false\n\ndownload:\n  output: /downloads\n  uid: 1000\n  gid: 1000\n  chmodFile: 0o644\n  chmodDir: 0o755\n  include:\n    - ^Mr\\.Robot\\.S04.+(VOSTFR|SUBFRENCH).+(720p).+(HDTV|WEB-DL|WEBRip).+\n  exclude:\n    - \\.nfo$\n  since: 2019-02-01T18:50:05Z\n  retry: 3\n  hideSkipped: false\n  tempFirst: false\n  createBaseDir: false\n\nnotif:\n  mail:\n    host: smtp.example.com\n    port: 587\n    ssl: false\n    insecureSkipVerify: false\n    from: ftpgrab@example.com\n    to: webmaster@example.com\n</code></pre> <p>Can be transposed to:</p> environment variables <pre><code>FTPGRAB_DB_PATH=ftpgrab.db\n\nFTPGRAB_SERVER_FTP_HOST=test.rebex.net\nFTPGRAB_SERVER_FTP_PORT=21\nFTPGRAB_SERVER_FTP_USERNAME=demo\nFTPGRAB_SERVER_FTP_PASSWORD=password\nFTPGRAB_SERVER_FTP_SOURCES=/src1,/src2\nFTPGRAB_SERVER_FTP_TIMEOUT=5s\nFTPGRAB_SERVER_FTP_DISABLEUTF8=false\nFTPGRAB_SERVER_FTP_DISABLEEPSV=false\nFTPGRAB_SERVER_FTP_TLS=false\nFTPGRAB_SERVER_FTP_INSECURESKIPVERIFY=false\nFTPGRAB_SERVER_FTP_LOGTRACE=false\n\nFTPGRAB_DOWNLOAD_OUTPUT=/downloads\nFTPGRAB_DOWNLOAD_GID=1000\nFTPGRAB_DOWNLOAD_UID=1000\nFTPGRAB_DOWNLOAD_CHMODDIR=0o755\nFTPGRAB_DOWNLOAD_CHMODFILE=0o644\nFTPGRAB_DOWNLOAD_INCLUDE=^Mr\\.Robot\\.S04.+(VOSTFR|SUBFRENCH).+(720p).+(HDTV|WEB-DL|WEBRip).+\nFTPGRAB_DOWNLOAD_EXCLUDE=\\.nfo$\nFTPGRAB_DOWNLOAD_SINCE=2019-02-01T18:50:05Z\nFTPGRAB_DOWNLOAD_RETRY=3\nFTPGRAB_DOWNLOAD_HIDESKIPPED=false\nFTPGRAB_DOWNLOAD_TEMPFIRST=false\nFTPGRAB_DOWNLOAD_CREATEBASEDIR=false\n\nFTPGRAB_NOTIF_MAIL_HOST=smtp.example.com\nFTPGRAB_NOTIF_MAIL_PORT=587\nFTPGRAB_NOTIF_MAIL_SSL=false\nFTPGRAB_NOTIF_MAIL_INSECURESKIPVERIFY=false\nFTPGRAB_NOTIF_MAIL_FROM=ftpgrab@example.com\nFTPGRAB_NOTIF_MAIL_TO=webmaster@example.com\n</code></pre>"},{"location":"config/#reference","title":"Reference","text":"<ul> <li>db</li> <li>server<ul> <li>ftp</li> <li>sftp</li> </ul> </li> <li>download</li> <li>notif<ul> <li>mail</li> <li>script</li> <li>slack</li> <li>webhook</li> </ul> </li> </ul>"},{"location":"config/db/","title":"Database configuration","text":""},{"location":"config/db/#path","title":"<code>path</code>","text":"<p>Path to database file. (default <code>ftpgrab.db</code>)</p> <p>Config file</p> <pre><code>db:\n  path: ftpgrab.db\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_DB_PATH</code></li> </ul>"},{"location":"config/download/","title":"Download configuration","text":"<p>Example</p> <pre><code>download:\n  output: /download\n  uid: 1000\n  gid: 1000\n  chmodFile: 0o644\n  chmodDir: 0o755\n  include:\n    - ^Mr\\.Robot\\.S04.+(VOSTFR|SUBFRENCH).+(720p).+(HDTV|WEB-DL|WEBRip).+\n  exclude:\n    - \\.nfo$\n  since: 2019-02-01T18:50:05Z\n  retry: 3\n  hideSkipped: false\n  tempFirst: false\n  createBaseDir: false\n</code></pre>"},{"location":"config/download/#output","title":"<code>output</code>","text":"<p>Output destination folder of downloaded files. Env var <code>FTPGRAB_DOWNLOAD_OUTPUT</code> overrides this value.</p> <p>Config file</p> <pre><code>download:\n  output: /download\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_DOWNLOAD_OUTPUT</code></li> </ul>"},{"location":"config/download/#uid","title":"<code>uid</code>","text":"<p>Owner user applied to downloaded files. (default to caller)</p> <p>Config file</p> <pre><code>download:\n  uid: 1000\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_DOWNLOAD_UID</code></li> </ul>"},{"location":"config/download/#gid","title":"<code>gid</code>","text":"<p>Owner group applied to downloaded files. (default to caller)</p> <p>Config file</p> <pre><code>download:\n  gid: 1000\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_DOWNLOAD_GID</code></li> </ul>"},{"location":"config/download/#chmodfile","title":"<code>chmodFile</code>","text":"<p>Permissions applied to files. (default: <code>0o644</code>)</p> <p>Config file</p> <pre><code>download:\n  chmodFile: 0o644\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_DOWNLOAD_CHMODFILE</code></li> </ul>"},{"location":"config/download/#chmoddir","title":"<code>chmodDir</code>","text":"<p>Permissions applied to folders. (default: <code>0o755</code>)</p> <p>Config file</p> <pre><code>download:\n  chmodDir: 0o755\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_DOWNLOAD_CHMODDIR</code></li> </ul>"},{"location":"config/download/#include","title":"<code>include</code>","text":"<p>List of regular expressions to include files.</p> <p>Config file</p> <pre><code>download:\n  include:\n    - ^Mr\\.Robot\\.S04.+(VOSTFR|SUBFRENCH).+(720p).+(HDTV|WEB-DL|WEBRip).+\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_DOWNLOAD_INCLUDE</code></li> </ul>"},{"location":"config/download/#exclude","title":"<code>exclude</code>","text":"<p>List of regular expressions to exclude files.</p> <p>Config file</p> <pre><code>download:\n  exclude:\n    - \\.nfo$\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_DOWNLOAD_EXCLUDE</code></li> </ul>"},{"location":"config/download/#since","title":"<code>since</code>","text":"<p>Only download files created since the specified date in RFC3339 format.</p> <p>Config file</p> <pre><code>download:\n  since: 2019-02-01T18:50:05Z\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_DOWNLOAD_SINCE</code></li> </ul>"},{"location":"config/download/#retry","title":"<code>retry</code>","text":"<p>Number of retries in case of download failure. (default: <code>3</code>)</p> <p>Config file</p> <pre><code>download:\n  retry: 3\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_DOWNLOAD_RETRY</code></li> </ul>"},{"location":"config/download/#hideskipped","title":"<code>hideSkipped</code>","text":"<p>Not display skipped downloads. (default: <code>false</code>)</p> <p>Config file</p> <pre><code>download:\n  hideSkipped: false\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_DOWNLOAD_HIDESKIPPED</code></li> </ul>"},{"location":"config/download/#tempfirst","title":"<code>tempFirst</code>","text":"<p>First download the files to a temporary location and then move them to the final destination. (default <code>false</code>)</p> <p>Config file</p> <pre><code>download:\n  tempFirst: false\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_DOWNLOAD_TEMPFIRST</code></li> </ul>"},{"location":"config/download/#createbasedir","title":"<code>createBaseDir</code>","text":"<p>Create basename of a FTP source path in the destination folder. This is highly recommended if you have multiple FTP source paths to prevent overwriting. (default: <code>false</code>)</p> <p>Warning</p> <p>Does not apply if <code>sources</code> is <code>/</code> only.</p> <p>Config file</p> <pre><code>download:\n  createBaseDir: false\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_DOWNLOAD_CREATEBASEDIR</code></li> </ul>"},{"location":"config/notif/mail/","title":"Mail notifications","text":"<p>Notifications can be sent through SMTP.</p>"},{"location":"config/notif/mail/#configuration","title":"Configuration","text":"<p>File</p> <pre><code>notif:\n  mail:\n    host: localhost\n    port: 25\n    ssl: false\n    insecureSkipVerify: false\n    from: ftpgrab@example.com\n    to: webmaster@example.com\n</code></pre> Name Default Description <code>host</code><sup>1</sup> <code>localhost</code> SMTP server host <code>port</code><sup>1</sup> <code>25</code> SMTP server port <code>ssl</code> <code>false</code> SSL defines whether an SSL connection is used. Should be false in most cases since the auth mechanism should use STARTTLS <code>insecureSkipVerify</code> <code>false</code> Controls whether a client verifies the server's certificate chain and hostname <code>username</code> SMTP username <code>usernameFile</code> Use content of secret file as SMTP username if <code>username</code> not defined <code>password</code> SMTP password <code>passwordFile</code> Use content of secret file as SMTP password if <code>password</code> not defined <code>from</code><sup>1</sup> Sender email address <code>to</code><sup>1</sup> Recipient email address <p>Environment variables</p> <ul> <li><code>FTPGRAB_NOTIF_MAIL_HOST</code></li> <li><code>FTPGRAB_NOTIF_MAIL_PORT</code></li> <li><code>FTPGRAB_NOTIF_MAIL_SSL</code></li> <li><code>FTPGRAB_NOTIF_MAIL_INSECURESKIPVERIFY</code></li> <li><code>FTPGRAB_NOTIF_MAIL_USERNAME</code></li> <li><code>FTPGRAB_NOTIF_MAIL_USERNAMEFILE</code></li> <li><code>FTPGRAB_NOTIF_MAIL_PASSWORD</code></li> <li><code>FTPGRAB_NOTIF_MAIL_PASSWORDFILE</code></li> <li><code>FTPGRAB_NOTIF_MAIL_FROM</code></li> <li><code>FTPGRAB_NOTIF_MAIL_TO</code></li> </ul>"},{"location":"config/notif/mail/#sample","title":"Sample","text":"<ol> <li> <p>Value required\u00a0\u21a9\u21a9\u21a9\u21a9</p> </li> </ol>"},{"location":"config/notif/script/","title":"Script notifications","text":"<p>You can call a script when a notification occured. Following environment variables will be passed:</p> <pre><code>FTPGRAB_VERSION=3.0.0\nFTPGRAB_SERVER_IP=10.0.0.1\nFTPGRAB_DEST_HOSTNAME=my-computer\nFTPGRAB_JOURNAL_ENTRIES[0]_FILE=/test/test_changed/1GB.bin\nFTPGRAB_JOURNAL_ENTRIES[0]_STATUS=Not included\nFTPGRAB_JOURNAL_ENTRIES[0]_LEVEL=skip\nFTPGRAB_JOURNAL_ENTRIES[0]_TEXT=\nFTPGRAB_JOURNAL_ENTRIES[1]_FILE=/test/test_changed/56a42b12df8d27baa163536e7b10d3c7.png\nFTPGRAB_JOURNAL_ENTRIES[1]_STATUS=Not included\nFTPGRAB_JOURNAL_ENTRIES[1]_LEVEL=skip\nFTPGRAB_JOURNAL_ENTRIES[1]_TEXT=\nFTPGRAB_JOURNAL_ENTRIES[2]_FILE=/test/test_special_chars/1024.rnd\nFTPGRAB_JOURNAL_ENTRIES[2]_STATUS=Never downloaded\nFTPGRAB_JOURNAL_ENTRIES[2]_LEVEL=success\nFTPGRAB_JOURNAL_ENTRIES[2]_TEXT=1.049MB successfully downloaded in 513 milliseconds\nFTPGRAB_JOURNAL_COUNT_SUCCESS=1\nFTPGRAB_JOURNAL_COUNT_SKIP=2\nFTPGRAB_JOURNAL_COUNT_ERROR=0\nFTPGRAB_JOURNAL_DURATION=12 seconds\n</code></pre>"},{"location":"config/notif/script/#configuration","title":"Configuration","text":"<p>File</p> <pre><code>notif:\n  script:\n    cmd: \"myprogram\"\n    args:\n      - \"--anarg\"\n      - \"another\"\n</code></pre> Name Default Description <code>cmd</code><sup>1</sup> Command or script to execute <code>args</code> List of args to pass to <code>cmd</code> <code>dir</code> Specifies the working directory of the command <p>Environment variables</p> <ul> <li><code>FTPGRAB_NOTIF_SCRIPT_CMD</code></li> <li><code>FTPGRAB_NOTIF_SCRIPT_ARGS</code></li> <li><code>FTPGRAB_NOTIF_SCRIPT_DIR</code></li> </ul> <ol> <li> <p>Value required\u00a0\u21a9</p> </li> </ol>"},{"location":"config/notif/slack/","title":"Slack notifications","text":"<p>You can send notifications to your Slack channel using an incoming webhook URL.</p> <p>Hint</p> <p>Mattermost webhooks are compatible with Slack notification without any special configuration (if Webhooks are enabled).</p>"},{"location":"config/notif/slack/#configuration","title":"Configuration","text":"<p>File</p> <pre><code>notif:\n  slack:\n    webhookURL: https://hooks.slack.com/services/ABCD12EFG/HIJK34LMN/01234567890abcdefghij\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_NOTIF_SLACK_WEBHOOKURL</code></li> </ul> Name Default Description <code>webhookURL</code><sup>1</sup> Slack incoming webhook URL"},{"location":"config/notif/slack/#sample","title":"Sample","text":"<ol> <li> <p>Value required\u00a0\u21a9</p> </li> </ol>"},{"location":"config/notif/webhook/","title":"Webhook notifications","text":"<p>You can send webhook notifications with the following settings.</p>"},{"location":"config/notif/webhook/#configuration","title":"Configuration","text":"<p>File</p> <pre><code>notif:\n  webhook:\n    endpoint: http://webhook.foo.com/sd54qad89azd5a\n    method: GET\n    headers:\n      content-type: application/json\n      authorization: Token123456\n    timeout: 10s\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_NOTIF_WEBHOOK_ENDPOINT</code></li> <li><code>FTPGRAB_NOTIF_WEBHOOK_METHOD</code></li> <li><code>FTPGRAB_NOTIF_WEBHOOK_HEADERS_&lt;KEY&gt;</code></li> <li><code>FTPGRAB_NOTIF_WEBHOOK_TIMEOUT</code></li> </ul> Name Default Description <code>endpoint</code><sup>1</sup> URL of the HTTP request <code>method</code><sup>1</sup> <code>GET</code> HTTP method <code>headers</code> Map of additional headers to be sent (key is case insensitive) <code>timeout</code> <code>10s</code> Timeout specifies a time limit for the request to be made"},{"location":"config/notif/webhook/#sample","title":"Sample","text":"<p>The JSON response will look like this:</p> <pre><code>{\n  \"ftpgrab_version\": \"5.2.0\",\n  \"server_ip\": \"10.0.0.1\",\n  \"dest_hostname\": \"my-computer\",\n  \"journal\": {\n    \"entries\": [\n      {\n        \"file\": \"/test/test_changed/1GB.bin\",\n        \"status\": \"Not included\",\n        \"level\": \"skip\"\n      },\n      {\n        \"file\": \"/test/test_changed/56a42b12df8d27baa163536e7b10d3c7.png\",\n        \"status\": \"Not included\",\n        \"level\": \"skip\"\n      },\n      {\n        \"file\": \"/test/test_special_chars/1024.rnd\",\n        \"status\": \"Never downloaded\",\n        \"level\": \"success\",\n        \"text\": \"1.049MB successfully downloaded in 513 milliseconds\"\n      }\n    ],\n    \"count\": {\n      \"success\": 1,\n      \"skip\": 2\n    },\n    \"duration\": \"12 seconds\"\n  }\n}\n</code></pre> <ol> <li> <p>Value required\u00a0\u21a9\u21a9</p> </li> </ol>"},{"location":"config/server/ftp/","title":"FTP server configuration","text":"<p>Warning</p> <p><code>ftp</code> and <code>sftp</code> are mutually exclusive</p> <p>Example</p> <pre><code>server:\n  ftp:\n    host: test.rebex.net\n    port: 21\n    username: demo\n    password: password\n    sources:\n      - /\n    timeout: 5s\n    disableUTF8: false\n    disableEPSV: false\n    disableMLSD: false\n    escapeRegexpMeta: false\n    tls: false\n    insecureSkipVerify: false\n    logTrace: false\n</code></pre>"},{"location":"config/server/ftp/#reference","title":"Reference","text":""},{"location":"config/server/ftp/#host","title":"<code>host</code>","text":"<p>FTP host IP or domain.</p> <p>Config file</p> <pre><code>server:\n  ftp:\n    host: 127.0.0.1\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_HOST</code></li> </ul>"},{"location":"config/server/ftp/#port","title":"<code>port</code>","text":"<p>FTP port. (default <code>21</code>)</p> <p>Config file</p> <pre><code>server:\n  ftp:\n    port: 21\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_PORT</code></li> </ul>"},{"location":"config/server/ftp/#username","title":"<code>username</code>","text":"<p>FTP username.</p> <p>Config file</p> <pre><code>server:\n  ftp:\n    username: foo\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_USERNAME</code></li> </ul>"},{"location":"config/server/ftp/#usernamefile","title":"<code>usernameFile</code>","text":"<p>Use content of secret file as FTP username if <code>username</code> not defined.</p> <p>Config file</p> <pre><code>server:\n  ftp:\n    usernameFile: /run/secrets/username\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_USERNAMEFILE</code></li> </ul>"},{"location":"config/server/ftp/#password","title":"<code>password</code>","text":"<p>FTP password.</p> <p>Config file</p> <pre><code>server:\n  ftp:\n    password: bar\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_PASSWORD</code></li> </ul>"},{"location":"config/server/ftp/#passwordfile","title":"<code>passwordFile</code>","text":"<p>Use content of secret file as FTP password if <code>password</code> not defined.</p> <p>Config file</p> <pre><code>server:\n  ftp:\n    passwordFile: /run/secrets/password\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_PASSWORDFILE</code></li> </ul>"},{"location":"config/server/ftp/#sources","title":"<code>sources</code>","text":"<p>List of sources paths to grab from FTP server.</p> <p>Config file</p> <pre><code>server:\n  ftp:\n    sources:\n      - /path1\n      - /path2/folder\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_SOURCES</code></li> </ul>"},{"location":"config/server/ftp/#timeout","title":"<code>timeout</code>","text":"<p>Timeout for opening connections, sending control commands, and each read/write of data transfers. (default <code>5s</code>)</p> <p>Config file</p> <pre><code>server:\n  ftp:\n    timeout: 5s\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_TIMEOUT</code></li> </ul>"},{"location":"config/server/ftp/#disableutf8","title":"<code>disableUTF8</code>","text":"<p>Do not issue the <code>OPTS UTF8 ON</code> command (default <code>false</code>).</p> <p>Config file</p> <pre><code>server:\n  ftp:\n    disableUTF8: false\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_DISABLEUTF8</code></li> </ul>"},{"location":"config/server/ftp/#disableepsv","title":"<code>disableEPSV</code>","text":"<p>Disables EPSV in favour of PASV. This is useful in cases where EPSV connections neither complete nor downgrade to PASV successfully by themselves, resulting in hung connections. (default <code>false</code>)</p> <p>Config file</p> <pre><code>server:\n  ftp:\n    disableEPSV: false\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_DISABLEEPSV</code></li> </ul>"},{"location":"config/server/ftp/#disablemlsd","title":"<code>disableMLSD</code>","text":"<p>Disables MLSD can be useful for servers which advertise MLSD (e.g. some versions of Serv-U) but don't support it properly. (default <code>false</code>)</p> <p>Config file</p> <pre><code>server:\n  ftp:\n    disableMLSD: false\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_DISABLEMLSD</code></li> </ul>"},{"location":"config/server/ftp/#escaperegexpmeta","title":"<code>escapeRegexpMeta</code>","text":"<p>Escapes all regular expression metacharacters in the source path. (default <code>false</code>)</p> <p>Warning</p> <p>This setting is only useful for FTP servers that enforce global matching or if you don't want to use regular expressions when listing files. See crazy-max/ftpgrab#49 for more information.</p> <p>Config file</p> <pre><code>server:\n  ftp:\n    escapeRegexpMeta: false\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_ESCAPEREGEXPMETA</code></li> </ul>"},{"location":"config/server/ftp/#tls","title":"<code>tls</code>","text":"<p>Use implicit FTP over TLS. (default <code>false</code>)</p> <p>Config file</p> <pre><code>server:\n  ftp:\n    tls: false\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_TLS</code></li> </ul>"},{"location":"config/server/ftp/#insecureskipverify","title":"<code>insecureSkipVerify</code>","text":"<p>Controls whether a client verifies the server\u2019s certificate chain and host name. (default <code>false</code>)</p> <p>Config file</p> <pre><code>server:\n  type: ftp\n  ftp:\n    insecureSkipVerify: false\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_INSECURESKIPVERIFY</code></li> </ul>"},{"location":"config/server/ftp/#logtrace","title":"<code>logTrace</code>","text":"<p>Enable low-level FTP log. Works only if global log level is debug. (default <code>false</code>)</p> <p>Config file</p> <pre><code>server:\n  type: ftp\n  ftp:\n    logTrace: false\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_FTP_LOGTRACE</code></li> </ul>"},{"location":"config/server/sftp/","title":"SFTP server configuration","text":"<p>Warning</p> <p><code>ftp</code> and <code>sftp</code> are mutually exclusive</p> <p>Example</p> <pre><code>server:\n  sftp:\n    host: 10.0.0.1\n    port: 22\n    username: foo\n    password: bar\n    sources:\n      - /\n    timeout: 30s\n    maxPacketSize: 32768\n</code></pre>"},{"location":"config/server/sftp/#reference","title":"Reference","text":""},{"location":"config/server/sftp/#host","title":"<code>host</code>","text":"<p>SFTP host IP or domain.</p> <p>Config file</p> <pre><code>server:\n  sftp:\n    host: 127.0.0.1\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_SFTP_HOST</code></li> </ul>"},{"location":"config/server/sftp/#port","title":"<code>port</code>","text":"<p>SFTP port. (default <code>22</code>)</p> <p>Config file</p> <pre><code>server:\n  sftp:\n    port: 22\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_SFTP_PORT</code></li> </ul>"},{"location":"config/server/sftp/#username","title":"<code>username</code>","text":"<p>SFTP username.</p> <p>Config file</p> <pre><code>server:\n  sftp:\n    username: foo\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_SFTP_USERNAME</code></li> </ul>"},{"location":"config/server/sftp/#usernamefile","title":"<code>usernameFile</code>","text":"<p>Use content of secret file as SFTP username if <code>username</code> not defined.</p> <p>Config file</p> <pre><code>server:\n  sftp:\n    usernameFile: /run/secrets/username\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_SFTP_USERNAMEFILE</code></li> </ul>"},{"location":"config/server/sftp/#password","title":"<code>password</code>","text":"<p>Warning</p> <p><code>password</code> and <code>keyFile</code> are mutually exclusive</p> <p>SFTP password.</p> <p>Config file</p> <pre><code>server:\n  sftp:\n    password: bar\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_SFTP_PASSWORD</code></li> </ul>"},{"location":"config/server/sftp/#passwordfile","title":"<code>passwordFile</code>","text":"<p>Use content of secret file as SFTP password if <code>password</code> not defined.</p> <p>Config file</p> <pre><code>server:\n  sftp:\n    passwordFile: /run/secrets/password\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_SFTP_PASSWORDFILE</code></li> </ul>"},{"location":"config/server/sftp/#keyfile","title":"<code>keyFile</code>","text":"<p>Warning</p> <p><code>keyFile</code> and <code>password</code> are mutually exclusive</p> <p>Path to your private key to enable publickey authentication.</p> <p>Config file</p> <pre><code>server:\n  sftp:\n    keyFile: /home/user/key.ppk\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_SFTP_KEYFILE</code></li> </ul>"},{"location":"config/server/sftp/#keypassphrase","title":"<code>keyPassphrase</code>","text":"<p>SFTP key passphrase if <code>keyFile</code> is defined.</p> <p>Config file</p> <pre><code>server:\n  sftp:\n    keyPassphrase: bar\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_SFTP_PASSWORD</code></li> </ul>"},{"location":"config/server/sftp/#keypassphrasefile","title":"<code>keyPassphraseFile</code>","text":"<p>Use content of secret file as SFTP key passphrase if <code>keyPassphrase</code> not defined.</p> <p>Config file</p> <pre><code>server:\n  sftp:\n    keyPassphraseFile: /run/secrets/passphrase\n</code></pre>"},{"location":"config/server/sftp/#sources","title":"<code>sources</code>","text":"<p>List of sources paths to grab from SFTP server.</p> <p>Config file</p> <pre><code>server:\n  sftp:\n    sources:\n      - /path1\n      - /path2/folder\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_SFTP_SOURCES</code></li> </ul>"},{"location":"config/server/sftp/#timeout","title":"<code>timeout</code>","text":"<p>Timeout is the maximum amount of time for the TCP connection to establish. <code>0s</code> means no timeout. (default <code>30s</code>)</p> <p>Config file</p> <pre><code>server:\n  sftp:\n    timeout: 30s\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_SFTP_TIMEOUT</code></li> </ul>"},{"location":"config/server/sftp/#maxpacketsize","title":"<code>maxPacketSize</code>","text":"<p>Sets the maximum size of the payload, measured in bytes. (default <code>32768</code>)</p> <p>Config file</p> <pre><code>server:\n  sftp:\n    maxPacketSize: 32768\n</code></pre> <p>Environment variables</p> <ul> <li><code>FTPGRAB_SERVER_SFTP_MAXPACKETSIZE</code></li> </ul>"},{"location":"install/binary/","title":"Installation from binary","text":""},{"location":"install/binary/#download","title":"Download","text":"<p>FTPGrab binaries are available on releases page.</p> <p>Choose the archive matching the destination platform:</p> <ul> <li><code>ftpgrab_7.11.0_darwin_amd64.tar.gz</code></li> <li><code>ftpgrab_7.11.0_darwin_arm64.tar.gz</code></li> <li><code>ftpgrab_7.11.0_freebsd_386.tar.gz</code></li> <li><code>ftpgrab_7.11.0_freebsd_amd64.tar.gz</code></li> <li><code>ftpgrab_7.11.0_linux_386.tar.gz</code></li> <li><code>ftpgrab_7.11.0_linux_amd64.tar.gz</code></li> <li><code>ftpgrab_7.11.0_linux_arm64.tar.gz</code></li> <li><code>ftpgrab_7.11.0_linux_armv5.tar.gz</code></li> <li><code>ftpgrab_7.11.0_linux_armv6.tar.gz</code></li> <li><code>ftpgrab_7.11.0_linux_armv7.tar.gz</code></li> <li><code>ftpgrab_7.11.0_linux_ppc64le.tar.gz</code></li> <li><code>ftpgrab_7.11.0_linux_riscv64.tar.gz</code></li> <li><code>ftpgrab_7.11.0_linux_s390x.tar.gz</code></li> <li><code>ftpgrab_7.11.0_windows_386.zip</code></li> <li><code>ftpgrab_7.11.0_windows_amd64.zip</code></li> <li><code>ftpgrab_7.11.0_windows_arm64.zip</code></li> </ul> <p>And extract FTPGrab:</p> <pre><code>wget -qO- https://github.com/crazy-max/ftpgrabreleases/download/v7.11.0/ftpgrab_7.11.0_linux_amd64.tar.gz | tar -zxvf - ftpgrab\n</code></pre> <p>After getting the binary, it can be tested with <code>./ftpgrab --help</code> command and moved to a permanent location.</p>"},{"location":"install/binary/#server-configuration","title":"Server configuration","text":"<p>Steps below are the recommended server configuration.</p>"},{"location":"install/binary/#prepare-environment","title":"Prepare environment","text":"<p>Create user to run FTPGrab (ex. <code>ftpgrab</code>)</p> <pre><code>groupadd ftpgrab\nuseradd -s /bin/false -d /bin/null -g ftpgrab ftpgrab\n</code></pre>"},{"location":"install/binary/#create-required-directory-structure","title":"Create required directory structure","text":"<pre><code>mkdir -p /var/lib/ftpgrab\nchown ftpgrab:ftpgrab /var/lib/ftpgrab/\nchmod -R 750 /var/lib/ftpgrab/\nmkdir /etc/ftpgrab\nchown ftpgrab:ftpgrab /etc/ftpgrab\nchmod 770 /etc/ftpgrab\n</code></pre>"},{"location":"install/binary/#configuration","title":"Configuration","text":"<p>Create your first configuration file in <code>/etc/ftpgrab/ftpgrab.yml</code> and type:</p> <pre><code>chown ftpgrab:ftpgrab /etc/ftpgrab/ftpgrab.yml\nchmod 644 /etc/ftpgrab/ftpgrab.yml\n</code></pre>"},{"location":"install/binary/#copy-binary-to-global-location","title":"Copy binary to global location","text":"<pre><code>cp ftpgrab /usr/local/bin/ftpgrab\n</code></pre>"},{"location":"install/binary/#running-ftpgrab","title":"Running FTPGrab","text":"<p>After the above steps, two options to run FTPGrab:</p>"},{"location":"install/binary/#1-creating-a-service-file-recommended","title":"1. Creating a service file (recommended)","text":"<p>See how to create Linux service to start FTPGrab automatically.</p>"},{"location":"install/binary/#2-running-from-terminal","title":"2. Running from terminal","text":"<pre><code>FTPGRAB_DB_PATH=/var/lib/ftpgrab/ftpgrab.db /usr/local/bin/ftpgrab \\\n  --config /etc/ftpgrab/ftpgrab.yml \\\n  --schedule \"*/30 * * * *\"\n</code></pre>"},{"location":"install/binary/#updating-to-a-new-version","title":"Updating to a new version","text":"<p>You can update to a new version of FTPGrab by stopping it, replacing the binary at <code>/usr/local/bin/ftpgrab</code> and restarting the instance.</p> <p>If you have carried out the installation steps as described above, the binary should have the generic name <code>ftpgrab</code>. Do not change this, i.e. to include the version number.</p>"},{"location":"install/docker/","title":"Installation with Docker","text":""},{"location":"install/docker/#about","title":"About","text":"<p>FTPGrab provides automatically updated Docker  images within several registries:</p> Registry Image Docker Hub <code>crazymax/ftpgrab</code> GitHub Container Registry <code>ghcr.io/crazy-max/ftpgrab</code> <p>It is possible to always use the latest stable tag or to use another service that handles updating Docker images.</p> <p>Note</p> <p>Want to be notified of new releases? Check out  Diun (Docker Image Update Notifier) project!</p> <p>Following platforms for this image are available:</p> <pre><code>$ docker run --rm mplatform/mquery crazymax/ftpgrab:latest\nImage: crazymax/ftpgrab:latest\n * Manifest List: Yes\n * Supported platforms:\n   - linux/amd64\n   - linux/arm/v6\n   - linux/arm/v7\n   - linux/arm64\n   - linux/386\n   - linux/ppc64le\n</code></pre> <p>This reference setup guides users through the setup based on <code>docker-compose</code>, but the installation of <code>docker-compose</code> is out of scope of this documentation. To install <code>docker-compose</code> itself, follow the official install instructions.</p>"},{"location":"install/docker/#volumes","title":"Volumes","text":"Path Description <code>/db</code> Folder containing bbolt database file <code>/download</code> Downloaded files folder"},{"location":"install/docker/#usage","title":"Usage","text":"<pre><code>version: \"3.5\"\n\nservices:\n  ftpgrab:\n    image: crazymax/ftpgrab:latest\n    container_name: ftpgrab\n    volumes:\n      - \"./db:/db:rw\"\n      - \"./download:/download:rw\"\n    environment:\n      - \"TZ=Europe/Paris\"\n      - \"SCHEDULE=*/30 * * * *\"\n      - \"LOG_LEVEL=info\"\n      - \"LOG_JSON=false\"\n      - \"FTPGRAB_SERVER_FTP_HOST=test.rebex.net\"\n      - \"FTPGRAB_SERVER_FTP_PORT=21\"\n      - \"FTPGRAB_SERVER_FTP_USERNAME=demo\"\n      - \"FTPGRAB_SERVER_FTP_PASSWORD=password\"\n      - \"FTPGRAB_SERVER_FTP_SOURCES=/src1,/src2\"\n      - \"FTPGRAB_DOWNLOAD_GID=1000\"\n      - \"FTPGRAB_DOWNLOAD_UID=1000\"\n      - \"FTPGRAB_DOWNLOAD_INCLUDE=^Mr\\\\.Robot\\\\.S04.+(VOSTFR|SUBFRENCH).+(720p).+(HDTV|WEB-DL|WEBRip).+\"\n      - \"FTPGRAB_DOWNLOAD_EXCLUDE=\\\\.nfo$$\"\n      - \"FTPGRAB_DOWNLOAD_SINCE=2019-02-01T18:50:05Z\"\n      - \"FTPGRAB_DOWNLOAD_RETRY=5\"\n      - \"FTPGRAB_NOTIF_MAIL_HOST=smtp.example.com\"\n      - \"FTPGRAB_NOTIF_MAIL_PORT=25\"\n      - \"FTPGRAB_NOTIF_MAIL_FROM=ftpgrab@example.com\"\n      - \"FTPGRAB_NOTIF_MAIL_TO=webmaster@example.com\"\n    restart: always\n</code></pre> <p>Edit this example with your preferences and run the following commands to bring up FTPGrab:</p> <pre><code>docker-compose up -d\ndocker-compose logs -f\n</code></pre> <p>Or use the following command:</p> <pre><code>docker run -d --name ftpgrab \\\n  -e \"TZ=Europe/Paris\" \\\n  -e \"SCHEDULE=*/30 * * * *\" \\\n  -e \"LOG_LEVEL=info\" \\\n  -e \"LOG_JSON=false\" \\\n  -e \"FTPGRAB_SERVER_FTP_HOST=test.rebex.net\" \\\n  -e \"FTPGRAB_SERVER_FTP_PORT=21\" \\\n  -e \"FTPGRAB_SERVER_FTP_USERNAME=demo\" \\\n  -e \"FTPGRAB_SERVER_FTP_PASSWORD=password\" \\\n  -e \"FTPGRAB_SERVER_FTP_SOURCES=/src1,/src2\" \\\n  -e \"FTPGRAB_DOWNLOAD_GID=1000\" \\\n  -e \"FTPGRAB_DOWNLOAD_UID=1000\" \\\n  -e \"FTPGRAB_DOWNLOAD_INCLUDE=^Mr\\.Robot\\.S04.+(VOSTFR|SUBFRENCH).+(720p).+(HDTV|WEB-DL|WEBRip).+\" \\\n  -e \"FTPGRAB_DOWNLOAD_EXCLUDE=\\.nfo\\$\" \\\n  -e \"FTPGRAB_DOWNLOAD_SINCE=2019-02-01T18:50:05Z\" \\\n  -e \"FTPGRAB_DOWNLOAD_RETRY=5\" \\\n  -e \"FTPGRAB_NOTIF_MAIL_HOST=smtp.example.com\" \\\n  -e \"FTPGRAB_NOTIF_MAIL_PORT=25\" \\\n  -e \"FTPGRAB_NOTIF_MAIL_FROM=ftpgrab@example.com\" \\\n  -e \"FTPGRAB_NOTIF_MAIL_TO=webmaster@example.com\" \\\n  -v \"$(pwd)/db:/db:rw\" \\\n  -v \"$(pwd)/download:/download:rw\" \\\n  crazymax/ftpgrab:latest\n</code></pre> <p>To upgrade your installation to the latest release:</p> <pre><code>docker-compose pull\ndocker-compose up -d\n</code></pre> <p>If you prefer to rely on the `configuration file instead of environment variables:</p> <pre><code># ./ftpgrab.yml\n\nserver:\n  ftp:\n    host: test.rebex.net\n    port: 21\n    username: demo\n    password: password\n    sources:\n      - /src1\n      - /src2\n\ndownload:\n  uid: 1000\n  gid: 1000\n  include:\n    - ^Mr\\.Robot\\.S04.+(VOSTFR|SUBFRENCH).+(720p).+(HDTV|WEB-DL|WEBRip).+\n  exclude:\n    - \\.nfo$\n  since: 2019-02-01T18:50:05Z\n  retry: 5\n\nnotif:\n  mail:\n    host: smtp.example.com\n    port: 25\n    from: ftpgrab@example.com\n    to: webmaster@example.com\n</code></pre> <p>And here is your docker composition:</p> <pre><code>version: \"3.5\"\n\nservices:\n  ftpgrab:\n    image: crazymax/ftpgrab:latest\n    container_name: ftpgrab\n    volumes:\n      - \"./db:/db:rw\"\n      - \"./download:/download:rw\"\n      - \"./ftpgrab.yml:/ftpgrab.yml:ro\"\n    environment:\n      - \"TZ=Europe/Paris\"\n      - \"SCHEDULE=*/30 * * * *\"\n      - \"LOG_LEVEL=info\"\n      - \"LOG_JSON=false\"\n    restart: always\n</code></pre>"},{"location":"install/linux-service/","title":"Run as service on Debian based distro","text":""},{"location":"install/linux-service/#using-systemd","title":"Using systemd","text":"<p>Warning</p> <p>Make sure to follow the instructions to install from binary before.</p> <p>To create a new service, paste this content in <code>/etc/systemd/system/ftpgrab.service</code>:</p> <pre><code>[Unit]\nDescription=FTPGrab\nDocumentation=https://crazymax.dev/ftpgrab/\nAfter=syslog.target\nAfter=network.target\n\n[Service]\nRestartSec=2s\nType=simple\nUser=ftpgrab\nGroup=ftpgrab\nExecStart=/usr/local/bin/ftpgrab --config /etc/ftpgrab/ftpgrab.yml --schedule \"*/30 * * * *\" --log-level info\nRestart=always\n#Environment=TZ=Europe/Paris\nEnvironment=LOG_TIMESTAMP=false\nEnvironment=FTPGRAB_DB_PATH=/var/lib/ftpgrab/ftpgrab.db\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Change the user, group, and other required startup values following your needs.</p> <p>Enable and start FTPGrab at boot:</p> <pre><code>sudo systemctl enable ftpgrab\nsudo systemctl start ftpgrab\n</code></pre> <p>To view logs:</p> <pre><code>journalctl -fu ftpgrab.service\n</code></pre>"},{"location":"migration/v3-to-v4/","title":"FTPGrab v3 to v4","text":"<p>To upgrade from v3 to v4 you have to move some files and rename the config and hash file to a custom name like <code>seedbox.conf</code> in the below example.</p> <pre><code># Move to /opt\nmv /etc/ftp-sync /opt\ncd /opt/ftp-sync/\n\n# Create required folders\nmkdir conf\nmkdir hash\n\n# Move files\nmv ftp-sync.conf conf/seedbox.conf\nmv ftp-sync.txt conf/seedbox.txt\n\n# Download the latest script and dist config\nwget https://raw.github.com/ftp-sync/ftp-sync/master/ftp-sync.sh -O /etc/init.d/ftp-sync --no-check-certificate\nchmod +x /etc/init.d/ftp-sync\nwget https://raw.github.com/ftp-sync/ftp-sync/master/ftp-sync.conf -O /opt/ftp-sync/ftp-sync.conf --no-check-certificate\n\n# Rename log files\ncd /var/log/ftp-sync/\nfor FILENAME in *; do mv $FILENAME seedbox-$FILENAME; done\n</code></pre> <p>Next you will have to edit your config file <code>/opt/ftp-sync/conf/seedbox.conf</code> :</p> <ul> <li>Remove lines starting with <code>LOGS_DIR=</code>, <code>PID_FILE=</code> and <code>HASH_DIR=</code></li> <li>Add a new line before <code>EMAIL_LOG=</code> with <code>DIR_DEST=\"/tmp/seedbox\"</code> (replace <code>/tmp/seedbox</code> to your destination folder)</li> <li>Add a new line after <code>DL_RESUME=</code> with <code>DL_SHUFFLE=0</code></li> </ul> <p>If you have a cron, do not forget to replace the argument to the config file of your choice :</p> <pre><code>0 4 * * * cd /etc/init.d/ &amp;&amp; ./ftp-sync seedbox.conf &gt;/dev/null 2&gt;&amp;1\n</code></pre>"},{"location":"migration/v4.0-to-v4.1/","title":"FTPGrab v4.0 to v4.1","text":"<p>Since the project has been renamed <code>ftpgrab</code>, some changes have to be made.</p> <pre><code># Rename files and folders\nmv /opt/ftp-sync/ /opt/ftpgrab\nmv /var/log/ftp-sync/ /var/log/ftpgrab\nmv /var/run/ftp-sync/ /var/run/ftpgrab\nmv /opt/ftpgrab/ftp-sync.conf /opt/ftpgrab/ftpgrab.conf\nmv /etc/init.d/ftp-sync /etc/init.d/ftpgrab\n\n# Download the latest script and dist config\nwget https://raw.github.com/crazy-max/ftpgrab/master/ftpgrab.sh -O /etc/init.d/ftpgrab --no-check-certificate\nchmod +x /etc/init.d/ftpgrab\nwget https://raw.github.com/crazy-max/ftpgrab/master/ftpgrab.conf -O /opt/ftpgrab/ftpgrab.conf --no-check-certificate\n</code></pre> <p>If you have a cron, do not forget to change the script's name :</p> <pre><code>0 4 * * * cd /etc/init.d/ &amp;&amp; ./ftpgrab seedbox.conf &gt;/dev/null 2&gt;&amp;1\n</code></pre>"},{"location":"migration/v4.1-to-v4.2/","title":"FTPGrab v4.1 to v4.2","text":"<pre><code>mv /etc/init.d/ftpgrab /usr/bin/\nupdate-rc.d ftpgrab remove\n</code></pre> <p>If you have a cron, do not forget to change it:</p> <pre><code>0 4 * * * ftpgrab seedbox.conf &gt;/dev/null 2&gt;&amp;1\n</code></pre>"},{"location":"migration/v5.0-to-v5.1/","title":"FTPGrab v5.0 to v5.1","text":"<p>This release changes the configuration layout as it introduces SFTP support:</p> <p>v5.0</p> <pre><code>ftp:\n  host: localhost\n</code></pre> <p>v5.1</p> <pre><code>server:\n  type: ftp\n  ftp:\n    host: localhost\n</code></pre>"},{"location":"migration/v5.0/","title":"FTPGrab v5.0","text":"<p>This release breaks the mechanism of previous releases and is not intended to be upgraded to this one. But you can easily translate your old configuration file with the new format. Also, the Docker image has been moved to a dedicated organization on Docker Hub.</p>"},{"location":"migration/v5.1-to-v5.2/","title":"FTPGrab v5.1 to v5.2","text":"<p>This release changes the configuration layout as it introduces webhook notification support:</p> <p>v5.1</p> <pre><code>mail:\n  enable: false\n  host: localhost\n</code></pre> <p>v5.2</p> <pre><code>notif:\n  mail:\n    enable: false\n    host: localhost\n</code></pre>"},{"location":"migration/v5.2-to-v6.0/","title":"FTPGrab v5.2 to v6.0","text":"<p>This release changes the configuration layout of TLS config for FTP:</p> <p>v5.2</p> <pre><code>server:\n  type: ftp\n  ftp:\n    tls:\n      enable: true\n      implicit: false\n      insecure_skip_verify: true\n</code></pre> <p>v6.0</p> <pre><code>server:\n  type: ftp\n  ftp:\n    tls: false\n    insecure_skip_verify: false\n</code></pre>"},{"location":"migration/v6-to-v7/","title":"FTPGrab v6 to v7","text":""},{"location":"migration/v6-to-v7/#configuration-transposed-into-environment-variables","title":"Configuration transposed into environment variables","text":"<p>All configuration is now transposed into environment variables. Take a look at the documentation for more details.</p> <p><code>FTPGRAB_DB</code> env var has been renamed <code>FTPGRAB_DB_PATH</code> to follow environment variables transposition.</p>"},{"location":"migration/v6-to-v7/#all-fields-in-configuration-are-now-camelcased","title":"All fields in configuration are now camelCased","text":"<p>In order to enable transposition into environmental variables, all fields in configuration are now camelCased:</p> <ul> <li><code>server.ftp.disable_epsv</code> &gt; <code>server.ftp.disableEPSV</code></li> <li><code>download.chmod_file</code> &gt; <code>download.chmodFile</code></li> <li><code>notif.mail.insecure_skip_verify</code> &gt; <code>notif.mail.insecureSkipVerify</code></li> <li>...</li> </ul> v6 <pre><code>db:\n  enable: true\n  path: ftpgrab.db\n\nserver:\n  type: ftp\n  ftp:\n    host: test.rebex.net\n    port: 21\n    username: demo\n    password: password\n    sources:\n      - /\n    timeout: 5s\n    disable_epsv: false\n    tls: false\n    insecure_skip_verify: false\n    log_trace: false\n\ndownload:\n  uid: 1000\n  gid: 1000\n  chmod_file: 0644\n  chmod_dir: 0755\n  include:\n    - ^Mr\\.Robot\\.S04.+(VOSTFR|SUBFRENCH).+(720p).+(HDTV|WEB-DL|WEBRip).+\n  exclude:\n    - \\.nfo$\n  since: 2019-02-01T18:50:05Z\n  retry: 3\n  hide_skipped: false\n  create_basedir: false\n\nnotif:\n  mail:\n    enable: true\n    host: smtp.example.com\n    port: 587\n    ssl: false\n    insecure_skip_verify: false\n    username: webmaster@example.com\n    password: apassword\n    from: ftpgrab@example.com\n    to: webmaster@example.com\n  webhook:\n    enable: true\n    endpoint: http://webhook.foo.com/sd54qad89azd5a\n    method: GET\n    headers:\n      Content-Type: application/json\n      Authorization: Token123456\n    timeout: 10s\n</code></pre> v7 <pre><code>db:\n  path: ftpgrab.db\n\nserver:\n  ftp:\n    host: test.rebex.net\n    port: 21\n    username: demo\n    password: password\n    sources:\n      - /\n    timeout: 5s\n    disableEPSV: false\n    tls: false\n    insecureSkipVerify: false\n    logTrace: false\n\ndownload:\n  output: /download\n  uid: 1000\n  gid: 1000\n  chmodFile: 0o644\n  chmodDir: 0o755\n  include:\n    - ^Mr\\.Robot\\.S04.+(VOSTFR|SUBFRENCH).+(720p).+(HDTV|WEB-DL|WEBRip).+\n  exclude:\n    - \\.nfo$\n  since: 2019-02-01T18:50:05Z\n  retry: 3\n  hideSkipped: false\n  createBaseDir: false\n\nnotif:\n  mail:\n    host: smtp.example.com\n    port: 587\n    ssl: false\n    insecureSkipVerify: false\n    from: ftpgrab@example.com\n    to: webmaster@example.com\n  webhook:\n    endpoint: http://webhook.foo.com/sd54qad89azd5a\n    method: GET\n    headers:\n      content-type: application/json\n      authorization: Token123456\n    timeout: 10s\n</code></pre>"},{"location":"migration/v6-to-v7/#remove-type-field-for-server","title":"Remove <code>type</code> field for server","text":"<p>The <code>type</code> field has been removed for server. The server type will now be choosed if it's defined.</p> <p>Warning</p> <p><code>ftp</code> and <code>sftp</code> are mutually exclusive</p> <p>v6</p> <pre><code>server:\n  type: ftp\n  ftp:\n    host: test.rebex.net\n    port: 21\n    sources:\n      - /\n</code></pre> <p>v7</p> <pre><code>server:\n  ftp:\n    host: test.rebex.net\n    port: 21\n    sources:\n      - /\n</code></pre>"},{"location":"migration/v6-to-v7/#changes-for-sftp-auth-fields","title":"Changes for SFTP auth fields","text":"<p><code>key</code> field has been renamed <code>keyFile</code> and can be use with the dedicated <code>keyPassphrase</code> field if a passphrase is required.</p>"},{"location":"migration/v6-to-v7/#remove-enable-field-for-notifiers","title":"Remove <code>enable</code> field for notifiers","text":"<p>The <code>enable</code> field has been removed for notifiers. If you don't want a notifier to be enabled, you must now remove or comment its configuration.</p> <p>v6</p> <pre><code>notif:\n  mail:\n    enable: true\n    host: smtp.example.com\n    port: 587\n    ssl: false\n    insecureSkipVerify: false\n    from: ftpgrab@example.com\n    to: webmaster@example.com\n  webhook:\n    enable: false\n    endpoint: http://webhook.foo.com/sd54qad89azd5a\n    method: GET\n    timeout: 10s\n</code></pre> <p>v7</p> <pre><code>notif:\n  mail:\n    host: smtp.example.com\n    port: 587\n    ssl: false\n    insecureSkipVerify: false\n    from: ftpgrab@example.com\n    to: webmaster@example.com\n</code></pre>"},{"location":"usage/basic-example/","title":"Basic example","text":"<p>In this section we quickly go over a basic way to run FTPGrab.</p>"},{"location":"usage/basic-example/#setup","title":"Setup","text":"<p>Warning</p> <p>Make sure to follow the instructions to install from binary before.</p> <p>First create a <code>ftpgrab.yml</code> configuration file like this one:</p> <pre><code># ./ftpgrab.yml\n\ndb:\n  path: ftpgrab.db\n\nserver:\n  ftp:\n    host: test.rebex.net\n    port: 21\n    username: demo\n    password: password\n    sources:\n      - /\n    timeout: 5s\n\ndownload:\n  output: /download\n  retry: 3\n  hideSkipped: false\n  createBaseDir: false\n\nnotif:\n  mail:\n    host: smtp.example.com\n    port: 25\n    username: foo\n    password: bar\n    from: ftpgrab@example.com\n    to: webmaster@example.com\n</code></pre> <p>That's it. Now you can launch FTPGrab with the following command:</p> <pre><code>ftpgrab --config ./ftpgrab.yml\n</code></pre>"},{"location":"usage/cli/","title":"Command Line","text":""},{"location":"usage/cli/#usage","title":"Usage","text":"<pre><code>ftpgrab [options]\n</code></pre>"},{"location":"usage/cli/#options","title":"Options","text":"<pre><code>$ ftpgrab --help\nUsage: ftpgrab\n\nGrab your files periodically from a remote FTP or SFTP server easily. More info:\nhttps://github.com/crazy-max/ftpgrab\n\nFlags:\n  -h, --help                Show context-sensitive help.\n      --version\n      --config=STRING       FTPGrab configuration file ($CONFIG).\n      --schedule=STRING     CRON expression format ($SCHEDULE).\n      --log-level=\"info\"    Set log level ($LOG_LEVEL).\n      --log-json            Enable JSON logging output ($LOG_JSON).\n      --log-timestamp       Adds the current local time as UNIX timestamp to the\n                            logger context ($LOG_TIMESTAMP).\n      --log-caller          Add file:line of the caller to log output\n                            ($LOG_CALLER).\n      --log-file=STRING     Add logging to a specific file ($LOG_FILE).\n</code></pre>"},{"location":"usage/cli/#environment-variables","title":"Environment variables","text":"<p>Following environment variables can be used in place:</p> Name Default Description <code>CONFIG</code> FTPGrab configuration file <code>SCHEDULE</code> CRON expression to schedule FTPGrab <code>LOG_LEVEL</code> <code>info</code> Log level output <code>LOG_JSON</code> <code>false</code> Enable JSON logging output <code>LOG_TIMESTAMP</code> <code>true</code> Adds the current local time as UNIX timestamp to the logger context <code>LOG_CALLER</code> <code>false</code> Enable to add <code>file:line</code> of the caller <code>LOG_FILE</code> Add logging to a specific file"}]}